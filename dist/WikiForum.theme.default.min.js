/*! For license information please see WikiForum.theme.default.min.js.LICENSE.txt */
!1!==$.extend({},{loadStyle:!0,adminGroup:["sysop"],adminUser:[],depthMax:3,enableNewForum:!1,enableModify:!0,enableDelete:!0},window.WikiForumDefaultTheme).loadStyle&&mw.loader.load("https://proj.wjghj.cn/Gadget-WikiForum/dist/WikiForum.theme.default.css","text/css"),mw.hook("WikiForum.theme").add((function(e){function t(e){return{"add-thread-label":"回复楼主","date-format":"yyyy年M月d日 hh:mm:ss","reaction-like-add":"给这个帖子点赞","reaction-like-remove":"取消点赞这个帖子","reaction-like-total":"有$1名用户赞了这个帖子","reply-btn":"回复","submit-btn":"发送","user-last":"修改者"}[e]||"{WikiForum-".concat(e,"}")}var a=mw.config.get(),r=function(e){var a=e.$root,r=e.forumEl,n=e.forumid,o=e.threadid,i=$("<div>",{class:"forum-new-reply-area"}),d=$("<textarea>",{class:"forum-textarea"}),s=$("<button>",{text:t("reply-btn"),class:"forum-submit-btn"}).click((function(){var t=d.val();t&&(i.addClass("forum-loading"),e.fn.updater.addReply({$root:a,forumEl:r,content:t,forumid:n,threadid:o}))}));return i.append($("<label>",{class:"forum-input-container"}).append($("<div>").append(d),$("<div>").append(s))),i},n=function(e){var r=e._forum,n=e.forumid,o=e.threadid,i=e.meta,d=e.fn,s=$("<div>",{class:"forum-reaction"}),l=i.reactionLike||"",u=(l=l?l.split("|"):[]).length,c=l.includes(a.wgUserName);return $likeBtn=$("<a>",{href:"javascript:;",class:"reaction-like",text:"👍(".concat(u,")"),title:t(c?"reaction-like-remove":"reaction-like-add")}).addClass(c?"is-like":"not-like").click((function(){if(s.addClass("forum-loading"),c){var e=l.indexOf(a.wgUserName);e>-1&&l.splice(e,1)}else l.push(a.wgUserName);l.sort(),l=l.join("|"),d.updater.updateThread({forumEl:r,forumid:n,threadid:o,meta:{reactionLike:l}})})),s.append($likeBtn),s};function o(e,t){var a={"M+":(t=t||new Date).getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return e}e&&e({allForumsContainer:function(e){return $("<div>",{class:"wiki-forum-all-container"})},forumContainer:function(e){return $("<div>",{class:"wiki-forum","data-forumid":e.meta.id})},threadContainer:function(e){var a=e.forumid,i=e.threadid,d=e.content,s=e.meta.timePublish||e.meta.timeRelease||e.meta.release||"",l=(e.meta.timeModify,e.meta.userAuthor||e.meta.user||"unsigned"),u=e.meta.userLast||l,c="forum-".concat(a,"_thread-").concat(i),m=$("<a>",{class:"forum-id-link",text:"#"+i,href:"#".concat(c)}).click((function(e){e.preventDefault(),window.history.pushState(null,null,"#"+c);var t=$("#"+c);$("html,body").animate({scrollTop:t.offset().top-100},500)})),f=$("<div>",{class:"forum-user"}).append($("<span>",{class:"forum-user-link"}).append($("<a>",{class:"mw-userlink userAuthor",text:l,href:mw.util.getUrl("User:"+l)}),u===l?"":$("<i>",{text:" (".concat(t("user-last"),": ").concat(u,")")}))),p=$("<div>",{class:"forum-content",html:d}),h=$("<div>",{class:"post-time"}).append($("<i>",{class:"post-date timePublish",text:o(t("date-format"),new Date(s))}));if("1"===i)return $("<div>",{id:c,class:"forum-thread forum-first"}).append($("<div>",{class:"forum-before"}).append($("<h3>",{class:"forum-title",text:e.forumMeta.title||"[UNTITLED] Forum Topic #"+a}),m,f),p,$("<div>",{class:"forum-after"}).append(h,n(e)));var v=e.$root,g=e.$container,b=e.forumid,k=e._forum,w=e.fn,x=r({$root:v,$container:g,forumEl:k,forumid:b,threadid:i,fn:w});return $("<div>",{class:"forum-thread",id:c}).append($("<div>",{class:"forum-before"}).append(m,f),p,$("<div>",{class:"forum-after"}).append(h,$("<div>",{class:"new-reply-container"}).append($("<div>",{class:"modify-buttons-group"}).append($("<a>",{class:"reply-btn",href:"javascript:;",text:t("reply-btn")}).click((function(e){x.show(),$(this).hide()}))),x),n(e)))},afterAllForums:function(e){return $("<div>",{class:"after-all-forums"}).append($("<div>").append($("<p>",{text:"newForumContainer"})))},afterForum:function(e){return $("<div>",{class:"forum-thread forum-add-thread"}).append(function(e){var a=e.$root,r=e._forum,n=e.forumid,o=$("<div>",{class:"forum-new-thread-area"}),i=$("<textarea>",{class:"forum-textarea"}),d=$("<button>",{text:t("submit-btn"),class:"forum-submit-btn"}).click((function(){var t=i.val();t&&(o.addClass("forum-loading"),e.fn.updater.addThread({$root:a,forumEl:r,forumid:n,content:t}))}));return o.append($("<strong>",{text:t("add-thread-label")}),$("<label>",{class:"forum-input-container"}).append($("<div>").append(i),$("<div>").append(d))),o}(e))},noForumContainer:function(e){}})}));
//# sourceMappingURL=WikiForum.theme.default.min.js.map