{"version":3,"sources":["webpack://mediawiki-wikiforum/./theme/default/default.js"],"names":["mw","hook","add","next","allForumsContainer","ctx","$","class","append","text","forumContainer","meta","id","threadContainer","String","content","cxt","timePublish","timeRelease","release","userAuthor","timeModify","user","$idLink","userLast","$userLink","href","util","getUrl","$content","html","$timeArea","Date","toLocaleString","$firstThread","title","$normalThread"],"mappings":";AAOAA,GAAGC,KAAK,mBAAmBC,KAAI,SAAAC,GA6F7BA,GACEA,EAAK,CACHC,mBA7FqB,SAAAC,GACvB,OAAOC,EAAE,QAAS,CAAEC,MAAO,6BAA8BC,OAoFlDF,EAAE,SAASE,OAAOF,EAAE,MAAO,CAAEG,KAAM,yBASxCC,eAvFiB,SAAAL,GACnB,OAAOC,EAAE,QAAS,CAChBC,MAAO,aACP,eAAgBF,EAAIM,KAAKC,KACxBJ,OAqEIF,EAAE,SAASE,OAAOF,EAAE,MAAO,CAAEG,KAAM,0BAexCI,gBAhFkB,SAAAR,GAEpB,IAAMO,EAAKE,OAAOT,EAAIM,KAAKC,IACrBG,EAAUC,IAAID,QACdE,EACJZ,EAAIM,KAAKM,aAAeZ,EAAIM,KAAKO,aAAeb,EAAIM,KAAKQ,SAAW,GAEhEC,GADaf,EAAIM,KAAKU,WACThB,EAAIM,KAAKS,YAAcf,EAAIM,KAAKW,MAAQ,YAIvDC,GAHalB,EAAIM,KAAKa,SAGZlB,EAAE,SAAU,CAAEC,MAAO,gBAAiBE,KAAM,IAAMG,KAC5Da,EAAYnB,EAAE,QAAS,CAAEC,MAAO,eAAgBC,OAClDF,EAAE,SAAU,CAAEC,MAAO,oBAAqBC,OACxCF,EAAE,MAAO,CACPC,MAAO,yBACPE,KAAMW,EACNM,KAAM1B,GAAG2B,KAAKC,OAAO,QAAUR,OAIjCS,EAAWvB,EAAE,QAAS,CAAEC,MAAO,gBAAiBuB,KAAMf,IACtDgB,EAAYzB,EAAE,QAAS,CAAEC,MAAO,cAAeC,OACjDF,EAAE,MAAO,CACPC,MAAO,wBACPE,KAAM,IAAIuB,KAAKf,GAAagB,oBAK5BC,EAAe5B,EAAE,QAAS,CAAEC,MAAO,6BAA8BC,OACnEF,EAAE,QAAS,CAAEC,MAAO,iBAAkBC,OACpCF,EAAE,OAAQ,CAAEC,MAAO,cAAeE,KAAMJ,EAAIM,KAAKwB,QACjDZ,EACAE,GAEFI,EACAvB,EAAE,QAAS,CAAEC,MAAO,gBAAiBC,OAAOuB,IAI1CK,EAAgB9B,EAAE,QAAS,CAAEC,MAAO,iBAAkBC,OACxDF,EAAE,QAAS,CAAEC,MAAO,iBAAkBC,OAAOe,EAASE,GACtDI,EACAvB,EAAE,QAAS,CAAEC,MAAO,gBAAiBC,OACnCuB,EAeGzB,EAAE,SAASE,OAAOF,EAAE,MAAO,CAAEG,KAAM,yBAT1C,MAAW,MAAPG,EACKsB,EAEAE","file":"WikiForum.theme.default.min.js","sourcesContent":["/**\n * @function theme.default 标准的官方主题\n * @param {Object} ctx\n * @param {Object} ctx.meta Metadata\n *\n * @param {Function} next\n */\nmw.hook('WikiForum.theme').add(next => {\n  // 全论坛容器\n  var allForumsContainer = ctx => {\n    return $('<div>', { class: 'wiki-forum-all-container' }).append(\n      newForumContainer()\n    )\n  }\n\n  // 单论坛容器\n  var forumContainer = ctx => {\n    return $('<div>', {\n      class: 'wiki-forum',\n      'data-forumid': ctx.meta.id,\n    }).append(newThreadContainer())\n  }\n\n  // 帖子容器\n  var threadContainer = ctx => {\n    // 处理 meta\n    const id = String(ctx.meta.id)\n    const content = cxt.content\n    const timePublish =\n      ctx.meta.timePublish || ctx.meta.timeRelease || ctx.meta.release || ''\n    const timeModify = ctx.meta.timeModify || timePublish\n    const userAuthor = ctx.meta.userAuthor || ctx.meta.user || 'unsigned'\n    const userLast = ctx.meta.userLast || userAuthor\n\n    // 缓存组件\n    var $idLink = $('<span>', { class: 'forum-id-link', text: '#' + id })\n    var $userLink = $('<div>', { class: 'forum-user' }).append(\n      $('<span>', { class: 'forum-user-link' }).append(\n        $('<a>', {\n          class: 'mw-userlink userAuthor',\n          text: userAuthor,\n          href: mw.util.getUrl('User:' + userAuthor),\n        })\n      )\n    )\n    var $content = $('<div>', { class: 'forum-content', html: content })\n    var $timeArea = $('<div>', { class: 'post-time' }).append(\n      $('<i>', {\n        class: 'post-date timePublish',\n        text: new Date(timePublish).toLocaleString(),\n      })\n    )\n\n    // 楼主\n    var $firstThread = $('<div>', { class: 'forum-thread forum-first' }).append(\n      $('<div>', { class: 'forum-before' }).append(\n        $('<h3>', { class: 'forum-title', text: ctx.meta.title }),\n        $idLink,\n        $userLink\n      ),\n      $content,\n      $('<div>', { class: 'forum-after' }).append($timeArea)\n    )\n\n    // 普通帖子\n    var $normalThread = $('<div>', { class: 'forum-thread' }).append(\n      $('<div>', { class: 'forum-before' }).append($idLink, $userLink),\n      $content,\n      $('<div>', { class: 'forum-after' }).append(\n        $timeArea,\n        newReplyContainer()\n      )\n    )\n\n    // 判断是否为楼主，并返回帖子容器\n    if (id === '1') {\n      return $firstThread\n    } else {\n      return $normalThread\n    }\n  }\n\n  // 新回复容器\n  var newReplyContainer = ctx => {\n    return $('<div>').append($('<p>', { text: 'newReplyContainer' }))\n  }\n\n  // 新帖子容器\n  var newThreadContainer = ctx => {\n    return $('<div>').append($('<p>', { text: 'newThreadContainer' }))\n  }\n\n  // 新论坛容器\n  var newForumContainer = ctx => {\n    return $('<div>').append($('<p>', { text: 'newForumContainer' }))\n  }\n\n  // 无论坛容器\n  var noForumContainer = ctx => {}\n\n  next &&\n    next({\n      allForumsContainer,\n      forumContainer,\n      threadContainer,\n    })\n})\n"],"sourceRoot":""}